---
// src/layouts/LandingLayout.astro - Layout optimizado para Landing Pages de Ads
import { SEO } from "astro-seo";
import CookieConsent from "@components/CookieConsent.astro";
import "@fontsource-variable/inter/index.css";
import '@fontsource-variable/bricolage-grotesque';
import { Icon } from "astro-icon/components";

export interface Props {
  title: string;
  description?: string;
}

const canonicalURL = new URL(Astro.url.pathname, Astro.site).toString();

const resolvedImageWithDomain = new URL(
  "/opengraph.png",
  Astro.site
).toString();

const { title, description = "Software de registro de jornada digital para PYMES. Cumple con la ley de 2025/2026. Multas de hasta 7.500€ evitadas." } = Astro.props;

const makeTitle = title + " | tictacdicta";
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- Meta Pixel Code - IMPORTANTE: Reemplaza TU_PIXEL_ID con tu ID real -->
    <script is:inline>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', 'TU_PIXEL_ID'); // ⚠️ REEMPLAZA CON TU PIXEL ID
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=TU_PIXEL_ID&ev=PageView&noscript=1"/>
    </noscript>
    <!-- End Meta Pixel Code -->

    <SEO
      title={makeTitle}
      description={description}
      canonical={canonicalURL}
      openGraph={{
        basic: {
          url: canonicalURL,
          type: "website",
          title: `Control Horario Digital - Cumple la Ley 2025 | tictacdicta`,
          image: resolvedImageWithDomain,
        },
        image: {
          alt: "Sistema de registro horario digital tictacdicta - Cumple con la nueva ley",
        },
      }}
    />
  </head>
  <body class="bg-white">
    <!-- Header minimalista para landing -->
    <header class="bg-white border-b border-slate-100 sticky top-0 z-50">
      <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
        <a href="/" class="flex items-center gap-2">
          <img src="/favicon.svg" alt="tictacdicta" class="w-8 h-8" />
          <span class="text-xl font-bold text-brand-blue-dark">tictac<span class="text-brand-blue">dicta</span></span>
        </a>
        <a href="https://wa.me/34613139737?text=Hola%21%20Quiero%20información%20sobre%20tictacdicta" 
           class="inline-flex items-center gap-2 px-4 py-2 text-sm font-semibold rounded-lg bg-[#84cc16] hover:bg-[#65a30d] text-white transition-colors">
          <Icon class="w-4 h-4" name="ic:baseline-whatsapp" />
          <span class="hidden sm:inline">Contactar</span>
        </a>
      </div>
    </header>

    <slot />

    <!-- Footer minimalista -->
    <footer class="bg-slate-900 text-white py-8">
      <div class="max-w-6xl mx-auto px-4">
        <div class="flex flex-col md:flex-row items-center justify-between gap-4">
          <div class="flex items-center gap-2">
            <img src="/favicon.svg" alt="tictacdicta" class="w-6 h-6" />
            <span class="font-semibold">tictacdicta</span>
          </div>
          <div class="flex items-center gap-6 text-sm text-slate-400">
            <a href="/politica-de-privacidad" class="hover:text-white">Privacidad</a>
            <a href="/politica-de-cookies" class="hover:text-white">Cookies</a>
            <a href="/aviso-legal" class="hover:text-white">Aviso Legal</a>
          </div>
          <div class="text-sm text-slate-400">
            © {new Date().getFullYear()} tictacdicta
          </div>
        </div>
      </div>
    </footer>

    <CookieConsent />
    
    <style is:global>
      img {
        content-visibility: auto;
      }
      /* Colores de marca */
      .bg-brand-blue { background-color: #2563eb; }
      .bg-brand-blue-dark { background-color: #1e3a5f; }
      .text-brand-blue { color: #2563eb; }
      .text-brand-blue-dark { color: #1e3a5f; }
      .border-brand-blue { border-color: #2563eb; }
    </style>
  </body>
</html>
